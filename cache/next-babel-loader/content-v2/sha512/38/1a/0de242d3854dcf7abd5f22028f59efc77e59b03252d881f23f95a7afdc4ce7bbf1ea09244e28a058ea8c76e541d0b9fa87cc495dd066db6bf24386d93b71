{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { useRouter } from \"next/router\";\nimport { Typography } from \"antd\";\nconst {\n  Title,\n  Text\n} = Typography;\n\nconst EventDetail = ({\n  news\n}) => {\n  var _news$content;\n\n  const router = useRouter(); // console.log(news.content);\n  // const {pid} = router.query;\n  // console.log(news)\n\n  const finalContent = (_news$content = news.content) === null || _news$content === void 0 ? void 0 : _news$content.replace(/<iframe [^>]+>(.*?)<\\/iframe>/g, \"\").replace(/data-src/g, \"src\").replace(/(http(s?):\\/\\/(.*?)mmbiz.qpic.cn)/ig, process.env.NEXT_PUBLIC_API + \"/wechat-image-proxy?url=$1\");\n  return __jsx(\"div\", {\n    style: {\n      paddingTop: \"20px\",\n      maxWidth: \"677px\",\n      marginLeft: \"auto\",\n      marginRight: \"auto\"\n    }\n  }, __jsx(Title, {\n    level: 2\n  }, news.title), __jsx(Text, {\n    type: \"secondary\"\n  }, news.author, \"  \", new Date(news.update_time).toLocaleDateString()), __jsx(\"div\", {\n    dangerouslySetInnerHTML: {\n      __html: finalContent\n    }\n  })) // <Iframe\n  //     url=\"https://mp.weixin.qq.com/s?src=11&timestamp=1581048912&ver=2143&signature=zSjL*nUNjAGSYKVh*fhvhDxm7vxwpO383GhT3SoIRB3U6VAY5Nub3mXJYoSdBomuXVxsy56U0mxKjb4xDyQJncBlcdk*v0yzvh7zw6DG4ETIOkh3DrOLsyf-bz-BjPCw&new=1\"\n  //   width=\"100%\"\n  //   height=\"100%\"\n  // />\n  ;\n};\n\nexport async function getStaticPaths() {\n  const res = await fetch(`${process.env.NEXT_PUBLIC_API}/articles`);\n  const news = await res.json();\n  return {\n    paths: news.map(item => {\n      return {\n        params: {\n          eventID: item._id\n        }\n      };\n    }),\n    fallback: false\n  };\n}\nexport async function getStaticProps({\n  params\n}) {\n  // const token = await fetch(`${API}/wechat/accessToken`);\n  const res = await fetch(`${process.env.NEXT_PUBLIC_API}/articles/${params.eventID}`);\n  const json = await res.json();\n  return {\n    props: {\n      news: json\n    }\n  };\n}\nexport default EventDetail;","map":null,"metadata":{},"sourceType":"module"}